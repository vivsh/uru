!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.uru=e():t.uru=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function r(t,e){"use strict";for(var n,r=t.split(/([\.#]?[^\s#.]+)/),i="div",s={},o=[];r.length;)n=r.shift(),n&&("."===n.charAt(0)?(n=n.substr(1),n in s||(o.push(n),s[n]=1)):"#"===n.charAt(0)?(n=n.substr(1),e.id=n):i=n);return o.length&&("class"in e||"classes"in e?(e["class"]=h.classes(o,e["class"],e.classes),delete e.classes):e["class"]=o.join(" ")),i}function i(t){"use strict";var e,n,i,s,o,u=0,h=[];if(i=Array.prototype.slice.call(arguments,1),o=a.merge({},a.isPlainObject(i[0])?i.shift():null),o.hasOwnProperty("if")&&!o["if"])return null;for(delete o["if"];i.length;)if(s=i.shift(),a.isArray(s))i.unshift.apply(i,s);else if(null!=s){if(!(s instanceof l.DomNode||s instanceof l.ComponentNode)){if("object"==typeof s&&"function"==typeof s.render){s=s.render(),i.unshift(s);continue}s=new l.DomNode(l.TEXT_TYPE,null,""+s,u)}h.push(s),s.index=u,u+=1}if("function"!=typeof t&&(t=r(t,o),t in v&&(t=v[t])),"function"==typeof t?e=t.prototype instanceof c?new l.ComponentNode(t,o,h):t(o,h):("-"===t.charAt(0)&&(t=t.substr(1)),e=new l.DomNode(t,o,h)),o){o.hasOwnProperty("key")&&(e.key=o.key,delete o.key);for(n in m)m.hasOwnProperty(n)&&n in o&&(e=m[n](o[n],e),delete o[n])}return e}function s(t,e,n){"use strict";l.patch(t,null,e,n);return t}function o(t){"use strict";l.patch(null,t)}function u(t){"use strict";t=t||document,l.render(function(){h.ready(function(){var e,n,r,o,u=t.querySelectorAll("[data-uru-component]")||[];for(e=0;e<u.length;e++)n=u[e],n.__uruComponent||(r=h.data(n,"uru-option")||{},o=n.getAttribute("data-uru-component"),n.__uruComponent=s(i(o,r),n))})})}var a=n(1),c=n(2),l=n(3),h=n(4),f=n(5),d=n(6),p=n(7),g=n(13),v={},m={};i.directive=function(t,e){"use strict";return arguments.length>=2&&(m[t]=e),m[t]},i.component=function(t){"use strict";var e=Array.prototype.slice.call(arguments,1);if(0===e.length)return v[t];var n=e.pop(),r=e.length?v[e.pop()]:c;return"object"==typeof n&&(n=r.extend(n)),v[t]=n,n.prototype.$name=t,n.prototype.name=t,n},i.mount=function(){"use strict";var t=arguments;return s.apply(null,t),t[0]},i.unmount=function(){"use strict";var t=arguments;o.apply(null,t)},i.automount=u,i.tie=function(t,e){"use strict";return function(n){var r=n.target[t],i={};a.isString(e)?(i[e]=r,this.set(i)):e.call(this,r)}},i.redraw=l.redraw,i.nextTick=l.nextTick,i.dom=h,i.utils=a,i.Component=c,i.emitter=f,f.enhance(i),i.clean=function(t){"use strict";if(t.nodeType)for(var e=t.querySelectorAll("[data-uru-component]"),n=0;n<e.length;n++){var r=e[n],i=r.__uruComponent;i&&(l.clean(i),delete r.__uruComponent)}else l.clean(t)},i.types=p,i.stringify=d.stringify,i.routes=g,t.exports=i},function(t,e){function n(){}function r(t){"use strict";return"[object String]"===Object.prototype.toString.call(t)}function i(t){"use strict";return!!(t&&t.constructor&&t.call&&t.apply)}function s(t){"use strict";return"[object Array]"===Object.prototype.toString.call(t)}function o(t){"use strict";return"[object Object]"===Object.prototype.toString.call(t)}function u(t){"use strict";if("object"==typeof t&&null!==t){if("function"==typeof Object.getPrototypeOf){var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}return!1}function a(t,e){"use strict";var n,r=t.length;for(n=0;n<r;n++)if(t[n]===e)return t.splice(n,1),n;return-1}function c(t){"use strict";if(Object.assign)return Object.assign.apply(this,arguments);if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=t,n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}function l(t,e){"use strict";for(var n,r,i,s,o,u={},a=[{src:t,dst:e,reverse:!1},{src:e,dst:t}],c=0;a.length;)if(n=a.pop(),n.src!==n.dst)if("object"==typeof n.src&&"object"==typeof n.dst){for(i in n.src)if(n.src.hasOwnProperty(i)){if(r=n.key||i,r in u)continue;s=n.src[i],o=n.dst[i],a.push({key:r,src:s,dst:o})}}else if(!(n.key&&n.key in u)){if(c+=1,!n.key){u=e;break}u[n.key]=e[n.key]}return!!c&&{total:c,changes:u}}function h(t,e,n){"use strict";var r=n;return e in t&&(r=t[e],delete t[e]),r}function f(t){"use strict";var e,n,r,i=[];for(e in t)if(t.hasOwnProperty(e))for(n=t[e],n=s(n)?n:[n],r=0;r<n.length;r++)i.push(encodeURIComponent(e)+"="+encodeURIComponent(n[r]));return i.join("&")}function d(){"use strict";var t=window.location.pathname;return"/"!==t.charAt(0)&&(t="/"+t),t}function p(t,e,n){"use strict";var r;return function(){var i=this,s=arguments,o=function(){r=null,n||t.apply(i,s)},u=n&&!r;clearTimeout(r),r=setTimeout(o,e),u&&t.apply(i,s)}}function g(t,e){"use strict";var n,r,i,s,o,u,a,c,l,h=[{a:t,b:e}];if(t===e)return!0;for(;h.length;)if(o=h.shift(),i=o.a,s=o.b,n=typeof o.a,r=typeof o.b,i===s);else{if(n!==r)return!1;if("date"===n)return i.getTime()===s.getTime();if("object"!==n)return!1;if(null==i||null==s)return!1;if(i.constructor!==s.constructor)return!1;if(Object.isFrozen(i)||Object.isFrozen(s))return!1;if("[object Array]"===Object.prototype.toString.call(i))for(l=Math.max(i.length,s.length),u=0;u<l;u++)h.push({a:i[u],b:s[u]});else{c={};for(a in i)i.hasOwnProperty(a)&&(h.push({a:i[a],b:s[a]}),c[a]=1);for(a in s)!s.hasOwnProperty(a)||a in c||h.push({a:i[a],b:s[a]})}}return!0}function v(t,e,n,r){"use strict";var i,s,o=l(t,e);if(o!==!1){o=o.changes;for(i in o)o.hasOwnProperty(i)&&(s=o[i],n.call(r,i,s,void 0!==s))}}function m(t){"use strict";var e=Object.create(t),n=Array.prototype.slice.call(arguments,1);return n.unshift(e),e["super"]=t,c.apply(null,n)}function y(t){"use strict";return t.replace(/\\([\s\S])|(")/g,"\\$1$2")}function w(t,e){"use strict";return function(){return t.apply(e,Array.prototype.slice.call(arguments,2))}}function $(t){"use strict";for(var e=Array.prototype.slice.call(arguments,1),n=0;n<e.length;n++)w(t[e[n]],t)}var b=function(t){"use strict";var e=this,n=(e.prototype,t.hasOwnProperty("constructor")?t.constructor:function(){e.apply(this,arguments)}),r=(h(t,"statics"),h(t,"props"));return n.prototype=m(e.prototype,t,{constructor:n}),c(n,{extend:b},e),r&&Object.defineProperties(n.prototype,r),n},x=function(t){"use strict";return 0===t.indexOf("//")&&(t=location.protocol+t),t.toLowerCase().replace(/([a-z])?:\/\//,"$1").split("/")[0]},E=function(t){"use strict";return(t.indexOf(":")>-1||t.indexOf("//")>-1)&&x(location.href)!==x(t)};t.exports={isArray:s,isString:r,isPlainObject:u,isFunction:i,isObject:o,extend:b,remove:a,merge:c,diffAttr:l,objectDiff:l,objectReact:v,take:h,assign:c,noop:n,isExternalUrl:E,buildQuery:f,pathname:d,debounce:p,isEqual:g,create:m,quote:y,bind:w,bindAll:$}},function(t,e,n){function r(t,e){"use strict";t=i.merge({},this.context,t),this.$events={},this.context={},this.$dirty=!0,this.set(t,!0),this.$dirty=!1,this.$created=!0,this.$own(e),this.initialize&&(this.initialize(this.context),this.$dirty=!0)}var i=n(1),s=(n(3),n(5));r.prototype={constructor:r,monitors:{},render:function(t,e){"use strict";throw new Error("Not implemented")},hasChanged:function(){"use strict";if(this.getContext){var t=this.getContext(this.context);return t&&this.set(t),this.$dirty}return!0},getParent:function(){"use strict";return this.$owner},set:function(t,e){"use strict";var n,r,s,o,u=this.context,a=!1,c=this.$events,l={},h=0;if(t){for(n in t)t.hasOwnProperty(n)&&(r=t[n],s=u[n],"on"===n.substr(0,2)?(o=n.substr(2),o in c&&(this.off(o,r),delete c[o]),r&&(this.on(o,r),c[o]=r)):r===s||i.isEqual(r,s)||(u[n]=r,l[n]={current:r,previous:s},a=!0,h++));for(n in c)!c.hasOwnProperty(n)||"on"+n in t||this.off(n)}var f=this.monitors;if(a&&!e){if(h)for(var d in l)l.hasOwnProperty(d)&&d in f&&this.trigger("change:"+d,l[d]);this.$created=!1}a&&(this.$dirty=a)},$mounted:function(){"use strict";this.onMount&&this.onMount(),this.trigger("mount")},$unmounted:function(){"use strict";this.onUnmount&&this.onUnmount(),this.trigger("unmount")},$destroyed:function(){"use strict";this.off(),this.stopListening(),this.$events={},this.onDestroy&&this.onDestroy(),this.trigger("destroy")},$disown:function(){"use strict";var t,e=this.$owner,n=e.$children,r=n.length;for(this.$owner=null,t=0;t<r;t++)if(n[t]===this)return void n.splice(t,1)},$own:function(t){"use strict";if(t){var e=t.$children||(t.$children=[]);this.$owner&&this.$disown(),this.$owner=t,e.push(this)}}},r.extend=i.extend,s.enhance(r.prototype),t.exports=r},function(t,e,n){function r(t,e){"use strict";return"svg"===t?"http://www.w3.org/2000/svg":e?e.namespaceURI:null}function i(t,e){"use strict";var n,i=t.type,s=t.attrs,o=r(i,e);return n=o?document.createElementNS(o,i):document.createElement(i),t.el=n,s&&h(t,s),n}function s(t,e){"use strict";var n,r;if(e)if("string"==typeof e)t.style.cssText=e;else{t.style.cssText="",r=t.style;for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n])}else t.style=""}function o(t){"use strict";var e,n=t.tagName;return e="BUTTON"===n?"click":"TEXTAREA"===n||"INPUT"===n&&t.type in{search:1,password:1,text:1}?"change":"SELECT"===n?"change":"INPUT"===n?"change":"click"}function u(t){"use strict";var e="__uruData",n=t[e]||(t[e]={events:{},plugins:{}});return n}function a(t,e,n,r){"use strict";var i=u(e).events,s=n;if("action"===s&&(s=o(e)),n in i&&c(t,n),r){var a=function(e){e=T.normalizeEvent(e),r.call(t.owner,e),P()};i[n]=a,e.addEventListener(s,a,!1)}}function c(t,e){"use strict";var n,r=t.el,i=u(r),s=i.events,a=e;i.plugins;if(arguments.length<2)for(a in s)s.hasOwnProperty(a)&&c(t,a);else n=s[e],"action"===a&&(a=o(r)),r.removeEventListener(a,n),delete s[e]}function l(t,e){"use strict";t.style.display=e?"":"none"}function h(t,e){"use strict";var n,r,i,o=t.el,u={className:1,checked:1,selected:1,disabled:1,readonly:1,innerHTML:1,innerText:1,value:1},c=[];for(n in e)e.hasOwnProperty(n)&&(r=e[n],"on"===n.substr(0,2)?c.push([n.substr(2),r]):"classes"===n||"class"===n?o.className=T.classes(r):"value"===n&&"TEXTAREA"===o.tagName?o.value=r:"show"===n?l(o,r):null!==r&&void 0!==r||n in u?(i=typeof r,"style"===n?s(o,r):n in u||"function"===i||"object"===i?o[n]=r:("boolean"===i&&(o[n]=r),o.setAttribute(n,r))):o.removeAttribute(n));var h,f;for(h=0;h<c.length;h++)f=c[h],a(t,o,f[0],f[1])}function f(t,e,n,r){"use strict";var i=t.el;"number"==typeof n&&n%1===0&&(n=e.childNodes[n]),n?e.insertBefore(i,n):e.appendChild(i)}function d(t){"use strict";var e=t.el,n=e.parentNode;n.removeChild(e)}function p(t,e){"use strict";var n=t.el,r=n.parentNode,i=r.childNodes[e];i!==n&&r.insertBefore(n,i)}function g(t,e,n,r){"use strict";this.type=t,this.attrs=e,this.children=n,this.el=null,this.index=arguments.length<4?-1:r,this.owner=null,this.events={},this.oid=++U}function v(t,e,n,r){"use strict";this.type=t,this.attrs=e,this.children=[],this.owner=null,this.el=null,this.inclusion=n,this.component=null,this.index=arguments.length<4?-1:r,this.oid=++U}function m(t,e){"use strict";console.log(e.stack);var n=t.$owner;t.$tag.defective=!0,n.trigger("error",e)}function y(t,e,n,r){"use strict";var i,s,o,u,a,c,l,h={src:e,dst:t,owner:e&&e.owner||k.component,parent:e?e.el.parentNode:document.createDocumentFragment()},f=[h],d=[],p=[];if(t===e)return h.parent;for(;f.length;)if(i=f.pop(),s=i.src,o=i.dst,u=i.parent,a=i.owner,o)if(s)s.type!==o.type?(o.tenant=s,w(f,u,a,[o],"dst"),w(f,u,a,[s],"src")):o.patch(f,s);else try{o.create(f,u,a),o.component&&d.push(o.component)}catch(g){o.errorRoot=n,m(o.component,g)}else s.component&&(p.push(s.component),s.component.$unmounted()),s.destroy(f,i.action===D);for(n&&(r===!0?n.parentNode.replaceChild(n,h.parent):r?n.insertBefore(h.parent,r):n.appendChild(h.parent)),c=d.length-1;c>=0;c--)l=d[c],l.$mounted();for(c=p.length-1;c>=0;c--)l=p[c],l.$destroyed();return h.parent}function w(t,e,n,r,i,s){"use strict";var o,u,a=r.length;for(o=a-1;o>=0;o--)u={owner:n,parent:e,action:s},u[i]=r[o],t.push(u)}function $(t,e,n,r,i){"use strict";var s,o,u,a,c={},l=[];for(o=i.length,s=0;s<o;s++)a=i[s],u=r[s],u&&(c[u.oid]=!0),l.push({owner:n,src:u,dst:a,parent:e});for(o=r.length,s=0;s<o;s++)u=r[s],u.oid in c||l.push({owner:n,src:u,dst:null,parent:e});l.reverse(),t.push.apply(t,l)}function b(){"use strict";R+=1,k.update()}function x(t,e,n){"use strict";return R+=1,y(t,null,e,n),t}function E(){"use strict";b(),N=!1,S&&P()}function P(t){"use strict";t===!0?S=!0:(S=!1,N||(N=!0,_(E)))}function O(t){"use strict";var e=N;N=!0,_(t),N=e}function C(t){"use strict";for(var e,n=[t];n.length;)e=n.shift(),e&&e.type!==-1&&(e instanceof g&&c(e),n.unshift(e.$tree))}var _,j=n(1),T=n(4),A=n(5),N=!1,S=!1;_="object"==typeof window?window.requestAnimationFrame||window.setTimeout:j.noop;var k,L=-1,D=1,R=(new Date).getTime(),U=87,F=["innerText","innerHTML","value","checked","selected","selectedIndex","disabled","readonly","className","style"],I={};!function(){"use strict";for(var t=0;t<F.length;t++)I[F[t]]=!0}(),g.prototype={constructor:g,create:function(t,e,n){"use strict";var r,s=this.type===L;r=s?document.createTextNode(this.children):i(this,e),this.el=r,this.owner=n,f(this,e),this.reorder(this),delete this.tenant,n&&n.$tree===this&&n.$tag.setEl(this),n.$updated=!0,s||w(t,this.el,this.owner,this.children,"dst")},destroy:function(t,e){"use strict";var n=this.type===L;this.owner,this.el;n||w(t,this.el,this.owner,this.children,"src",D),e||d(this),c(this),this.owner.$updated=!0,this.el=null,this.owner=null},patch:function(t,e){"use strict";var n=e.el,r=this.type===L,i=e.owner;if(this===e)throw new Error("Src and this should never be the same");if(this.el=n,this.owner=i,r)e.children!==this.children&&(n.nodeValue=this.children,i.$updated=!0);else{var s,o=j.objectDiff(e.attrs,this.attrs);o&&(s=o.changes,h(this,s),i.$updated=!0)}this.index!==e.index&&this.reorder(e),r||$(t,this.el,e.owner,e.children,this.children),e.owner=null,e.el=null},reorder:function(t){"use strict";var e=this.index;t.index<e&&e++,p(this,e)}},v.prototype={constructor:v,render:function(){"use strict";var t=this.inclusion,e=this.component.render(this.component.context,t);return e?(e.index=this.index,this.children=[e]):this.children=[],this.component.$tree=e,e},create:function(t,e,n){"use strict";var r=this.component=new this.type(this.attrs,n);r.$tag=this,r.$lastUpdate=R,this.owner=n,r.hasChanged&&r.hasChanged(),this.render(),this.el=null,w(t,e,this.component,this.children,"dst")},mount:function(){"use strict"},destroy:function(t,e){"use strict";var n=e?D:null;this.component.$disown(),w(t,this.el,this.component,this.children,"src",n),this.component.$tag=null,this.component=null,this.el=null,this.children=null,this.owner=null},patch:function(t,e){"use strict";if(this!==e){var n=this.component=e.component;n.$tag=this,n.set(this.attrs),this.el=e.el,this.children=e.children,n.$dirty=!0,this.owner=e.owner,e.component=null,e.owner=null,e.el=null}},update:function(){"use strict";for(var t,e,n,r=R,i=[this.component];i.length;){n=null,e=i.pop();try{e.$lastUpdate!==r&&e.hasChanged&&e.hasChanged()&&(n=e.$tree,t=e.$tag.render(),y(t,n),e.$updated&&e.onUpdate&&e.onUpdate(),e.$lastUpdate=r),delete e.$updated,e.$dirty=!1,i.push.apply(i,e.$children)}catch(s){m(e,s)}}},setEl:function(t){"use strict";for(var e=this.component;e&&e.$tree===t;)e.el=t.el,e.$tag.el=t.el,t=e.$tag,e=e.$owner;return this.component.el}},k=new v,k.component={$tag:k,$name:"_root",name:"_root"},A.enhance(k.component),t.exports={DomNode:g,ComponentNode:v,TEXT_TYPE:L,patch:y,mount:x,update:b,render:O,redraw:P,nextTick:function(t){"use strict";_(t)},clean:C}},function(t,e,n){function r(t){"use strict";var e,n,r=t.attributes,i=0;if(r)for(e=r.length,i=0;i<e;i+=1)n=r[i].name,"function"==typeof t[n]&&(t[n]=null)}function i(t){"use strict";var e;t.childNodes;for(e=t.lastChild;e;)t.removeChild(e),e=t.lastChild}function s(t){"use strict";var e=t.parentNode;e&&e.removeChild(t)}function o(t){"use strict";return t=t||window.event,t.stopPropagation||(t.stopPropagation=function(){this.cancelBubble=!0}),t.preventDefault||(t.preventDefault=function(){this.returnValue=!1}),"target"in t||(t.target=t.srcElement),"relatedTarget"in t||(t.relatedTarget=t.toElement||t.fromElement),"charCode"in t||(t.charCode=t.keyCode),t}function u(t,e,n){"use strict";var r=function(t){t=o(t),n.call(t.target,t)};r.__func__=n,t.addEventListener(e,r)}function a(t,e,n){"use strict";t.removeEventListener(t,e,n.__func__||n)}function c(t,e){"use strict";t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function l(t,e){"use strict";t.classList?t.classList.add(e):t.className+=" "+e}function h(t,e){"use strict";if(t.classList)t.classList.toggle(e);else{var n=t.className.split(" "),r=n.indexOf(e);r>=0?n.splice(r,1):n.push(e),t.className=n.join(" ")}}function f(){"use strict";for(var t,e,n,r,i=Array.prototype.slice.call(arguments),s=[],o={};i.length;)if(t=i.shift(),b.isArray(t))i.unshift.apply(i,t);else if(b.isObject(t))for(n in t)t.hasOwnProperty(n)&&(r=t[n],!r||n in o||(s.push(n),o[n]=!0));else b.isString(t)?(e=t.split(/\s+/),e.length>1?i.unshift.apply(i,e):(t=e[0],!t||t in o||(s.push(t),o[t]=!0))):t&&i.unshift(""+t);return s.join(" ")}function d(t){"use strict";"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t)}function p(t,e){"use strict";var n=t.getAttribute("data-"+e);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}}function g(t,e){"use strict";for(var n,r,i=[t];i.length;)n=i.shift(),1===n.nodeType&&(r=n.tagName,"INPUT"!==r&&"SELECT"!==r&&"TEXTAREA"!==r?i.push.apply(i,t.childNodes):e(n,m(n)))}function v(t,e){"use strict";for(var n,r,i,s=[],o=[t];o.length;)n=o.shift(),1===n.nodeType&&(r=n.tagName,"INPUT"!==r&&"SELECT"!==r&&"TEXTAREA"!==r?o.push.apply(o,t.childNodes):null!=(i=e(n))&&y(n,i));return s}function m(t){"use strict";var e=t.tagName;if("TEXTAREA"===e)return t.value;if("SELECT"===e){if(t.multiple){for(var n=t.options,r=[],i=0;i<n.length;i++)n[i].selected&&r.push(n[i].value);return r}return t.value}return"INPUT"===e&&("radio"===t.type||"checkbox"===t.type)?t.checked?t.value:null:t.value}function y(t,e){"use strict";var n,r=t.tagName,i={};if(b.isArray(e))for(n=0;n<e.length;n++)i[e[n]]=!0;if("TEXTAREA"===r)t.value=e;else if("SELECT"===r)if(t.multiple){var s,o=t.options;for(n=0;n<o.length;n++)s=o[n],o[n].selected=s.value==e||s.value in i}else t.value=e;else"INPUT"===r&&("radio"===t.type||"checkbox"===t.type?t.checked=t.value==e||t.value in i:t.value=e);return t.value}function w(t,e){"use strict";return t.tagName===e}function $(t,e){"use strict";for(var n=t,r="function"==typeof e?e:w;!r(n,e)&&n.parentNode;)n=n.parentNode;return n}var b=n(1);t.exports={normalizeEvent:o,removeEventListeners:r,remove:s,empty:i,addEventListener:u,removeEventListener:a,addClass:l,removeClass:c,toggleClass:h,classes:f,ready:d,data:p,getValue:m,setValue:y,closest:$,collectValues:g,populateValues:v}},function(t,e,n){function r(t,e,n){"use strict";this.source=t,this.type=e,this.data=n,this._propagate=!0,this._default=!0}var i=n(1);r.prototype={constructor:r,isDefaultPrevented:function(){"use strict";return!this._default},isPropagationStopped:function(){"use strict";return!this._propagate},preventDefault:function(){"use strict";this._default=!1},stopPropagation:function(){"use strict";this._propagate=!1}};var s={on:function(t,e){"use strict";var n=this.$handlers;return n||(n=this.$handlers={}),t in n||(n[t]=[]),n[t].push(e),this},off:function(t,e){"use strict";var n=arguments.length,r=this.$handlers;if(r&&(!t||t in r))return 0===n?this.$handlers={}:1===n?delete r[t]:i.remove(r[t],e),this},trigger:function(t,e,n,i){"use strict";for(var s=new r(this,t,e),o=this;o&&o.$callHandlers&&(o.$callHandlers(s),!s.isPropagationStopped());)o=o.getParent?o.getParent():null;return n&&!s.isDefaultPrevented()&&n.call(i,s),s},$callHandlers:function(t){"use strict";var e=this.$handlers,n=t.type,r=this.getParent?this.getParent():null;if(e&&n in e){var i,s=e[n];for(i=0;i<s.length;i++)s[i].call(r,t)}},listenTo:function(t,e,n){"use strict";function r(){return n.apply(o,arguments)}var s=this.$monitors,o=this;return i.isString(n)&&(n=this[n]),r.originalFunc=n,s||(s=this.$monitors=[]),t.on(e,r),s.push([t,e,r]),this},stopListening:function(){"use strict";var t,e=this.$monitors,n=0;if(e){for(n=0;n<e.length;n++)t=e[n],t[0].off(t[1],t[2]);delete this.$monitors}return this}};t.exports={Emitter:s,enhance:function(t){"use strict";i.assign(t,s)}}},function(t,e,n){function r(t){"use strict";var e,n,r;if(t){if(o.isString(t))return t;n=[];for(e in t)t.hasOwnProperty(e)&&(r=t[e],n.push(e+":"+r));return n.join(";")}}function i(t){"use strict";return t.replace(/\\([\s\S])|(")/g,"\\$1$2")}function s(t){"use strict";for(var e,n,s,a=[t],c=[];a.length;)if(e=a.shift())if(o.isString(e))c.push(e);else if(e.type===-1)a.unshift(e.children);else if("function"==typeof e.type){var l=e.component=new e.type(e.attrs,null);l.hasChanged&&l.hasChanged(),a.unshift.apply(a,e.render())}else{var h,f=e.children,d=e.attrs,p=e.type,g=["<"+p];if(d.hasOwnProperty("show")&&!d.show)continue;for(n in d)if(d.hasOwnProperty(n)){if(s=d[n],h=typeof s,"style"===n)s=r(s);else if("class"===n)s=u.classes(s);else if("show"===n)continue;if("function"===h)continue;"boolean"===h?s&&g.push(n):s&&(o.isString(s)||(s=JSON.stringify(s)),g.push(n+'="'+i(s)+'"'))}g.push(">"),c.push(g.join(" ")),a.unshift("</"+p+">"),f&&a.unshift.apply(a,f)}return c.join("")}var o=n(1),u=n(4);t.exports={stringify:s}},function(t,e,n){var r=n(8),i=n(12),s=n(9),o=n(10),u=n(11);t.exports={define:i.define,Field:i.Field,Form:r.Form,widget:s.widget,Widget:s.Widget,layout:o.layout,ValidationError:u.ValidationError}},function(t,e,n){function r(t,e){"use strict";return{value:new c(t,e),configurable:!0}}var i=n(1),s=n(9),o=n(10),u=n(11),a=n(12),c=i.extend.call(Object,{constructor:function(t,e){"use strict";this.form=t,this.field=e,this.name=e.name,this.id="id_"+this.name,this.label=e.getLabel();var n=s.widget(e.widget);this.widget=new n,this.layout=o.layout(e.layout)||o.layout("default")},props:{silent:{get:function(){"use strict";return!!this.form.fieldSilence[this.name]},set:function(t){"use strict";this.form.fieldSilence[this.name]=!!t}},errors:{get:function(){"use strict";return this.form.errors.get(this.name)}},data:{get:function(){"use strict";return this.widget.read(this.name,this.form.data)}},value:{get:function(){"use strict";return this.form.cleanedData[this.name]}}},clean:function(t){"use strict";var e=this.field;return e.isEmpty(t)?null:t=e.toJS(t)},validate:function(t){"use strict";var e=this.field;e.validate(t)},render:function(){"use strict";var t={widget:this.widget,errors:this.errors,value:this.value,label:this.label,name:this.name,field:this,id:this.id};return this.layout(t)}}),l=i.extend.call(Object,{constructor:function(t){"use strict";this._errors=new u.ErrorDict,this.changedData={$count:0},this.fieldSilence={},this.silent=!0,this.options=i.assign({},t);for(var e,n=this.constructor.fields,s=0;s<n.length;s++)e=n[s],Object.defineProperty(this,e.name,r(this,e)),this.fieldSilence[e.name]=!0;this._dirty=!0,this.setData(t.data)},props:{errors:{get:function(){"use strict";return this._dirty&&this.runClean(),this._errors},enumerable:!1},multipart:{get:function(){"use strict";var t,e,n=this.getFields();for(t=0;t<n.length;t++)if(e=n[t],e.widget.multipart)return!0;return!1}},fields:{get:function(){"use strict";return this.getFields()}},visibleFields:{get:function(){"use strict";var t,e,n=this.getFields(),r=[];for(t=0;t<n.length;t++)e=n[t],e.widget.hidden||r.push(e);return r}},hiddenFields:{get:function(){"use strict";var t,e,n=this.getFields(),r=[];for(t=0;t<n.length;t++)e=n[t],e.widget.hidden&&r.push(e);return r}}},getFields:function(){"use strict";for(var t,e=this.constructor.fields,n=[],r=0;r<e.length;r++)t=this[e[r].name],n.push(t);return n},setErrors:function(t){"use strict";this._errors.add(new t.ValidationError(t),this)},nonFieldErrors:function(){"use strict";return this.errors.get("__all__")},setData:function(t){"use strict";t=t||{};for(var e,n,r,s=i.assign({},this.data),o={},u=this.getFields(),a=0,c=0;c<u.length;c++)r=u[c],e=r.widget.read(r.name,t),n=r.widget.read(r.name,s),i.isEqual(n,e)||(o[r.name]=n,this._errors.clear(r.name),a++);o.$count=a,this.changedData=o,a&&(this._dirty=!0),this.data=t},hasChanged:function(t){"use strict";return arguments.length>=1?t in this.changedData:this.changedData.$count},formatErrorMessage:function(t,e,n){"use strict";return t},runClean:function(){"use strict";var t=this._errors,e=this;t.capture(function(){e.cleanedData=e.clean()},this),this._dirty=!1},isValid:function(){"use strict";return 0===this.errors.length},clean:function(){"use strict";var t,e,n,r,i=this.cleanedData,s=this.getFields(),o=(this.data,{}),u={},a=this._errors,c=this;a.clear("__all__"),this.cleanedData=o;for(var l=0;l<s.length;l++)t=s[l],this.hasChanged(t.name)?(a.clear(t.name),u[t.name]=t,a.capture(function(){o[t.name]=t.clean(t.data)},this,t.name)):o[t.name]=i[t.name];for(n in o)o.hasOwnProperty(n)&&n in u&&(t=u[n],e=o[n],a.capture(function(){t.validate(e,o),r="clean"+n.charAt(0).toUpperCase()+n.substr(1),"function"==typeof c[r]&&(o[n]=c[r](e,o))},this,n));return o}});l.extend=function(t){"use strict";var e,n;for(e in t)t.hasOwnProperty(e)&&(n=t[e])instanceof a.Field&&(n.name=e);var r=i.extend.call(this,t);return r.fields=a.Field.collect(r.prototype),r},t.exports={Form:l}},function(t,e,n){function r(t,e){"use strict";var n;if(arguments.length>1){arguments.length>2?(n=s[e],e=arguments[2]):n=o;var r="function"==typeof e?e:n.extend(e);return r.prototype.name=t,s[t]=r,r}return s[t]}var i=n(1),s={},o=i.extend.call(Object,{constructor:function(t){"use strict";i.assign(this,{},t)},read:function(t,e){"use strict";return e[t]}});!function(){"use strict";for(var t,e=["checkbox","radio","select","text","date","time","datetime","number","email","tel"],n=0;n<e.length;n++)t=e[n],r(t,{})}(),t.exports={widget:r,Widget:o}},function(t,e,n){function r(t,e){"use strict";return 1===arguments.length?i[t]:(i[t]=e,e)}var i=(n(1),{});t.exports={layout:r}},function(t,e,n){function r(t,e,n){"use strict";var s,o,u=t,a=[];if(1===arguments.length){for(s in u)if(u.hasOwnProperty(s))if(o=u[s],i.isArray(o))o.forEach(function(t){a.push(new r(t,null,s))});else{if(!i.isString(o))throw new Error("ValidationError accepts a string or a map<string,string>");a.push(new r(o,null,s))}this.data=a}else this.data=t,this.code=e,this.name=n}var i=n(1),s=i.extend.call(Object,{constructor:function(){"use strict";this.data={},this._length=0},all:function(){"use strict";return i.assign({},this.data)},get:function(t){"use strict";return this.data[t]||[]},capture:function(t,e,n){"use strict";var i=this;try{t()}catch(s){if(!(s instanceof r))throw s;s.name=n,i.add(s,e)}},clear:function(){"use strict";if(0===arguments.length)this.data={},this._length=0;else for(var t,e,n=this.data,r=0;r<arguments.length;r++)e=arguments[r],t=n[e],t&&(this._length-=t.length,delete n[e])},_insert:function(t,e,n){"use strict";var r=this.data;e=e||"__all__",e in r||(r[e]=[]);var i=n?n.formatErrorMessage(t.data,t.name,t.code):t.data;r[e].push(i),this._length++},add:function(t,e){"use strict";for(var n,r=[t];r.length;)n=r.pop(),i.isArray(n)?r.push.apply(r,n):i.isString(n.data)?this._insert(n,n.name,e):r.push.apply(r,n.data)},props:{length:{get:function(){"use strict";return this._length},enumerable:!1}}});t.exports={ValidationError:r,ErrorDict:s}},function(t,e,n){function r(t){"use strict";t=t||{};var e=u[t.type||"string"];if(!e)throw new Error("Unknown field type: "+t.type);return new e(t)}function i(t,e){u[t]=a.extend(e)}var s=n(1),o=n(11),u={};r.collect=function(t){"use strict";var e,n,r=[];for(e in t)n=t[e],n instanceof a&&r.push(n);return r};var a=s.extend.call(r,{constructor:function c(t){"use strict";this["super"].constructor!==c&&this["super"].constructor.call(this,arguments),this.widget="text",this.layout="vertical",s.assign(this,t)},validateChoice:function(t){"use strict";var e,n=this.choices;for(e=0;e<n.length;e++)if(n[e].value==t)return;if(e)throw new o.ValidationError("Invalid choice","choice",this.name)},validateMultipleChoice:function(t){"use strict";var e;for(e=0;e<t.length;e++)this.validateChoice(t[e])},isEmpty:function(t){"use strict";return""==t||null==t||0===t.length},isEqual:function(t,e){"use strict";return t===e},toJS:function(t,e){"use strict";return t},validate:function(t){"use strict";var e,n=this.validators||[];if(this.isEmpty(t)){if(this.required)throw new o.ValidationError("This field is required","required");return null}for(this.choices&&(s.isArray(t)?this.validateMultipleChoice(t):this.validateChoice(t)),e=0;e<n.length;e++)n[e](t)},getLabel:function(){"use strict";return this.hasOwnProperty("label")?this.label:this.name.charAt(0).toUpperCase()+this.name.substr(1)}});i("integer",{clean:function(t){"use strict";return parseInt(t)}}),i("float",{clean:function(t){"use strict";return parseFloat(t)}}),i("string",{clean:function(t){"use strict";return t}}),i("date",{clean:function(){"use strict"}}),i("datetime",{clean:function(){"use strict"}}),i("list",{clean:function(t){"use strict";return t.map(this.base.clean)}}),t.exports={define:i,Field:r}},function(t,e,n){n(14),n(15);t.exports={route:"",router:"",isRouted:"",reverse:"",resolve:""}},function(t,e,n){function r(t,e){"use strict";return function(n){t.set({component:e,params:n,error:!1})}}function i(t,e){"use strict";this.value=t,this.key=e}function s(t,e){"use strict";var n=u.component(t,d.extend(e));return n}function o(){var t=location.hash;t&&(t=document.getElementById(t.substr(1)))&&t.scrollIntoView()}function a(t,e){"use strict";this.name=t,this.component=e,this.status="ready",this.loading=0,this.originalRender=e.render,e.on("unmount",function(){delete e[t]})}function c(t,e){"use strict";var n;arguments.length<=2?n=g:(n=u.component(e),e=arguments[2]);var r=u.component(t,n.extend(e));return r}function l(t,e){"use strict";var n;arguments.length<=2?n=p:(n=u.component(e),e=arguments[2]);var r=u.component(t,n.extend(e));return r}var h=n(15),f=n(1);i.prototype.join=function(t){"use strict";return this.key+t};var d=u.Component.extend({routes:{},initialize:function(){"use strict";for(var t,e,n,s,o,u,a="",c=[],l=[new i(this.routes,a)];l.length;)if(u=l.shift(),t=u.value,a=u.key,f.isPlainObject(t))for(e in t)t.hasOwnProperty(e)&&(n=t[e],l.push(new i(n,u.join(e))));else{if(!f.isString(t))throw new Error("Invalid routes");o=a,h.addLink(t,o),c.push(t)}var s,n,d={},p=this;for(s=0;s<c.length;s++)n=c[s],d[n]=r(this,n);this.on("error",function(t){p.onError.apply(p,[t])}),this.on("mount",function(t){t.source.getParent()===p&&struts.isRouted(t.source.name)&&p.processMount(p.request,t.source)}),this.on("unmount",function(t){t.source.getParent()===p&&struts.isRouted(t.source.name)&&p.processUnmount(p.request,t.source)}),this.router=new h.Router(d,""),this.router.start()},getEnv:function(){},onError:function(t){this.set({error:t.data}),u.redraw(!0)},onUnmount:function(){"use strict";this.router.stop()},onSwitch:function(t){"use strict"},transform:function(t,e){return e},processMount:function(t,e){"use strict";for(var n,r=this.getMiddlewares(t).slice(0),i=r.length-1;i>=0;i--)n=r[i],n.processMount&&n.processMount(t,e)},processUnmount:function(t,e){for(var n,r=this.getMiddlewares(t).slice(0),i=r.length-1;i>=0;i--)n=r[i],n.processUnmount&&n.processUnmount(t,e)},processRequest:function(t){for(var e,n,r=this.getMiddlewares(t).slice(0),i=0;i<r.length;i++)if(n=r[i],n.processRequest&&(e=n.processRequest(t)),e)return e},processResponse:function(t,e){for(var n,r=this.getMiddlewares(t).slice(0),i=r.length-1;i>=0;i--)n=r[i],n.processResponse&&(e=n.processResponse(t,e));return this.transform(t,e)},getMiddlewares:function(t){
var e=(this.middlewares||[]).slice(0);return e},checkPermissions:function(t){var e,n,r=u.component(t.pageName),i=r?r.prototype.permissions||this.permissions||[]:[];for(e=0;e<i.length;e++)if(n=i[e],!n.test(t)){n.action(t);break}},render:function(t){"use strict";var e,n=this.getEnv()||{};n.params=t.params,t.url=n.url=location.href;var r=n;return r.pageName=t.component,r.router=this,this.request=r,t.error?e=this.renderError(t):t.component?(e=this.processRequest(r),e||(this.checkPermissions(r),this.onSwitch(t),e=u(t.component,n))):e=this.renderNotFound(t),this.processResponse(r,e)},renderRedirect:function(t){return u("small","Redirecting ...")},renderError:function(t){return u("h1","Oops! Error happened. Please try again after sometime")},renderLoading:function(t){return u("loader")},renderNotFound:function(t){"use strict";return u("h1","Oops ! Not found !!!!")}});a.inject=function(t,e){"use strict";e||(e="$loader"),t[e]=new a(e,t)},a.prototype.load=function(t,e,n,r){var i=this;if(2===arguments.length?(n=e,e="content"):3!==arguments.length||f.isString(n)||(r=n,n=e,e="content"),0===this.loading&&(this.status="loading"),this.loading++,f.isString(t)){var s=h.reverse(t)||t;t=http.get(s)}t.always(function(){"use strict";i.loading--,i.loading<=0&&(i.status="success")}).done(function(t){"use strict";var r={};r[n]=_.get(t,e),i.set(r)}).fail(function(){"use strict";var t={$status:"error"};t[n]=r,i.set(t)})};var p=u.Component.extend({$loading:0,initialize:function(){"use strict";_.bindAll(this,"onLoad","fetch"),this.on("change:url",this.onLoad),this.onLoad()},onLoad:function(){this.fetch()},fetch:function(){"use strict"},delegate:function(t,e){for(var n;(n=this.$owner)&&!n[t];);return n[t].call(n,Array.prototype.slice(arguments,1))},renderLoading:function(t){return u("div.text-center","Please wait ...")},renderError:function(t){},render:function(t,e){var n=t.$status;return"loading"===n?this.renderLoading(t):"error"===n?this.renderError(t):this.getContent(t,e)},load:function(t,e,n,r){var i=this;if(2===arguments.length?(n=e,e="content"):3!==arguments.length||f.isString(n)||(r=n,n=e,e="content"),0===this.$loading&&this.set({$status:"loading"}),this.$loading++,f.isString(t)){var s=h.reverse(t)||t;t=http.get(s)}return t.always(function(){"use strict";i.$loading--,i.$loading<=0&&i.set({$status:"success"})}).done(function(t){"use strict";var r={};r[n]=_.get(t,e),i.set(r)}).fail(function(){"use strict";var t={$status:"error"};t[n]=r,i.set(t)})}}),g=u.Component.extend({$loading:0,initialize:function(){"use strict";_.bindAll(this,"onLoad","fetch"),this.on("change:url",this.onLoad),this.on("change:url",o),this.on("mount",o),this.onLoad()},getPageTitle:function(){return this.pageTitle},onLoad:function(){this.fetch()},fetch:function(){"use strict"},getPageClass:function(){"use-strict";return this.pageClass},redirect:function(t,e){this.set({$status:"redirect"}),h.route(t,{replace:!!e})},delegate:function(t,e){for(var n;(n=this.$owner)&&!n[t];);return n[t].call(n,Array.prototype.slice(arguments,1))},onMount:function(){var t=this.getPageClass(),e=this.getPageTitle();if(t&&$("body").addClass(t),e){var n=$("title").first();this.previousPageTitle=n.html(),n.html(e)}},onUnmount:function(){var t=this.getPageClass();t&&$("body").removeClass(t),this.previousPageTitle&&$("title").first().html(this.previousPageTitle)},render:function(t,e){var n=t.$status;return"loading"===n?this.delegate("renderLoading",t):"redirect"===n?this.delegate("renderRedirect",t):"error"===n?this.delegate("renderError",t):this.getContent(t,e)},load:function(t,e,n,r){var i=this;if(2===arguments.length?(n=e,e="content"):3!==arguments.length||f.isString(n)||(r=n,n=e,e="content"),0===this.$loading&&this.set({$status:"loading"}),this.$loading++,f.isString(t)){var s=h.reverse(t)||t;t=http.get(s)}return t.always(function(){"use strict";i.$loading--,i.$loading<=0&&i.set({$status:"success"})}).done(function(t){"use strict";var r={};r[n]=_.get(t,e),i.set(r)}).fail(function(){"use strict";var t={$status:"error"};t[n]=r,i.set(t)})}});t.exports={router:s,page:c,pages:h.links,Page:g,view:l}},function(t,e,n){function r(t,e,n){"use strict";this.name=t,this.expr=t,this.component}function i(t){"use strict";return"/"!==t.charAt(0)&&(t="/"+t),t}function s(t){"use strict";var e=i(window.location.pathname),n=window.location.href,r=location.hash;if(n===x)return void(r&&(r=document.getElementById(r.substr(1)))&&r.scrollIntoView());var s=l(e);s?(t?(t.preventDefault(),t.stopImmediatePropagation()):u.redraw(!0),s.func(s.args)):window.location.reload(),T=!1,x=n}function o(){"use strict";j||(!function(){if(window.addEventListener){var t="complete"!==document.readyState;window.addEventListener("load",function(){setTimeout(function(){t=!1},0)},!1),window.addEventListener("popstate",function(e){t&&"complete"===document.readyState&&(e.preventDefault(),e.stopImmediatePropagation())},!1)}}(),x=window.location.href),j=!0,window.addEventListener("popstate",function(t){s(t),u.redraw()})}function a(){"use strict";window.removeEventListener("popstate",s)}function c(t,e){"use strict";e=e||{};var n=window.history,r=e&&e.replace?"replaceState":"pushState";n[r]({uru:!0},e.title||"",t),e.silent||s()}function l(t){"use strict";var e,n,r;for(e=0;e<C.length;e++)if(n=C[e],r=n.match(t))return r;return!1}function h(t){"use strict";var e;for(e=0;e<A.length;e++)if(A[e].name===t)return A[e]}function f(t){"use strict";var e,n,r={};for(e=0;e<A.length;e++)if(n=A[e].match(t))return r.params=n,r.component=A[e].component,r.name=A[e].name,A[e].params=n,r;return!1}function d(t,e){"use strict";var n,r=h(t);return!(!r||!(n=r.reverse(e)))&&n}function p(t,e){"use strict";return t.pattern=e,t.match=E.parse(t.pattern,!0),t.reverse=t.match.reverse,t}function g(t,e){"use strict";var n,r,i,s=this.routes=[];e=e||"";for(n in t)if(t.hasOwnProperty(n)){if(i=t[n],r=h(n),!r)throw new Error("No link found with the name "+n);if(p(r,e+r.pattern),!r)throw new Error("No related link found: "+n);s.push({link:r,func:i})}u.redraw()}function v(t){"use strict";var e=t.getAttribute("href")||"";return"#"===e.charAt(0)}function m(){"use strict";document.addEventListener("click",function(t){t=O.normalizeEvent(t);for(var e=t.target;e.parentNode&&"A"!==e.tagName;)e=e.parentNode;e.target||"A"!==e.tagName||!e.href||v(e)||P.isExternalUrl(e.href)||(t.preventDefault(),c(e.href),u.redraw())},!1)}function y(t){"use strict";var e,n;for(e=0;e<C.length;e++)if(n=C[e],n.contains(t))return!0;return!1}function w(t,e){"use strict";var n=u.component(t),r={name:t,pattern:e,component:n};r.match=E.parse(r.pattern,!0),r.reverse=r.match.reverse,A.push(r)}function $(){"use strict";var t=window.location.pathname;return"/"!==t.charAt(0)&&(t="/"+t),t}function b(t){"use strict";var e,n,r=[];for(e=0;e<A.length;e++)n=A[e],n.component&&(t&&!t(n.component)||r.push(n));return r}var x,E=n(16),P=n(1),O=n(4),C=[],_=!1,j=!1,T=!0,A=[];r.prototype={constructor:r,isPage:function(){"use strict";return null!=this.component}},g.prototype.start=function(t){"use strict";var e,n;for(e=0;e<this.routes.length;e++){if(n=this.routes[e],n.link.router)throw new Error("A link cannot be associated with more than one router");n.link.router=this}if(C.push(this),C.length&&!_&&(o(),_=!0),!t){var r=this.match(window.location.pathname);r&&r.func(r.args)}},g.prototype.contains=function(t){"use strict";var e,n,r,i=this.routes;for(e=0;e<i.length;e++)if(r=i[e],n=r.link,n.name===t)return!0;return!1},g.prototype.match=function(t){"use strict";var e,n,r,i,s=this.routes;for(e=0;e<s.length;e++)if(r=s[e],n=r.link,i=n.match(t))return r.args=i,delete i.$lastIndex,r;return!1},g.prototype.stop=function(){"use strict";var t,e;for(t=0;t<this.routes.length;t++)e=this.routes[t],delete e.link.router;P.remove(C,this),!C.length&&_&&(a(),_=!1)},t.exports={Router:g,addLink:w,resolve:f,route:c,reverse:d,mount:m,links:b,isRouted:y,currentPath:$}},function(t,e){function n(t,e){"use strict";c[t]=e}function r(t){"use strict";var e,n;for(e in c)if(c.hasOwnProperty(e)&&(n=c[e])&&n.match(t))return{pattern:n.pattern(t),coerce:n.coerce};return{pattern:t}}function i(t,e,n,i,s){"use strict";var o,u=t.length,c="";n=n||[],i=i||[],s=s||[],"/"===t.charAt(u-1)&&(c="/",t=t.substring(0,u-1));var l,h,f,d,p,g,v,m,y,w,$=t.split("/"),b=$.length,x=[],E=0,P=e?"$":"";for(l=0;l<b;l++)h=$[l],o=l===b-1?"":"/",f=a.exec(h),f?(d=f[1],g=!!f[2]||"*"===f[3],w=r(f[3]),p=w.pattern,v=parseInt(f[4]),m=parseInt(f[5]),y=isNaN(v)&&isNaN(m)?"":"{"+m||","+v||"}",p="("+p+")"+y,s.push({name:d,index:E,regex:new RegExp(p),optional:g}),p+=o,g&&(p="(?:"+p+")?"),x.push(p),n.push(d),i.push(w.coerce),E+=1):(x.push(h+o),s.push(h));return c&&s.push(""),new RegExp("^"+x.join("")+c+P)}function s(t,e,n,r){"use strict";var i,s,o,u,a=t.exec(r),c={},l=e.length,h=0;if(a){for(s=a.length,i=0;i<s;i++)o=a[i+1],void 0!==o&&(++h,i<l&&(u=n[i],"function"==typeof u&&(o=u(o)),c[e[i]]=o),c[i]=o);return c.$lastIndex=a[0].length,c}return!1}function o(t,e){"use strict";var n,r,i,s,o=t.length,u=[];for(e=e||{},n=0;n<o;n++)if(r=t[n],"object"==typeof r)if(s=void 0,e.hasOwnProperty(r.name)?s=e[r.name]:e.hasOwnProperty(r.index)&&(s=e[r.index]),void 0===s){if(!r.optional)return!1}else{if(i=String(s),!r.regex.test(i))return!1;u.push(i)}else u.push(r);return u.join("/")}function u(t,e){"use strict";var n=[],r=[],u=[],a=i(t,e,r,u,n),c=function(t){return s(a,r,u,t)},l=function(t){return o(n,t)};return c.regex=a,c.reverse=l,c}var a=/^(\w*)(\?)?:(.+?)(?:\s*\{\s*(\d*)\s*(?:,\s*(\d*))?\s*\})?$/,c={alpha:{match:function(t){"use strict";return"alpha"===t},pattern:function(t){"use strict";return"[a-zA-Z]+"}},alnum:{match:function(t){"use strict";return"alnum"===t},pattern:function(t){"use strict";return"\\w+"}},"int":{match:function(t){"use strict";return t in{num:1,"int":1}},pattern:function(t){"use strict";return"\\d+"},coerce:function(t){"use strict";return parseInt(t)}},any:{match:function(t){"use strict";return"any"===t},pattern:function(t){"use strict";return"[^/]*"}},greedyAny:{match:function(t){"use strict";return"*"===t},pattern:function(t){"use strict";return".*"}},choice:{match:function(t){"use strict";return"("===t.charAt(0)&&")"===t.charAt(t.length-1)},pattern:function(t){"use strict";var e=t.substring(1,t.length-1).split(",");return e.join("|")}},name:{match:function(t){"use strict";return"name"===t},pattern:function(){"use strict";return"[a-zA-Z]\\w+"}},slug:{match:function(t){"use strict";return"slug"===t},pattern:function(t){"use strict";return"^[A-Za-z0-9]+(?:-[A-Za-z0-9]+)*$"}}};t.exports={parse:u,register:n}}])});